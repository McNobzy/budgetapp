{% load static %}



<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link rel="stylesheet" href="{% static 'myglobal.css' %}">


<head>
    <title>Dashbaord - BudgApp</title>
</head>




<div class="container">
    <div class="navigation-bar">
        <div class="navigation-container">
            {% if user.is_authenticated %}
            Welcome {{user.username}} <a href="/logout" class="btn btn-danger">LOGOUT</a><a href="/">BudgApp</a>
            {% else %}
            <a href="/login" class="btn btn-primary">Login</a>  <a href="/register" class="btn btn-success">Register</a><a href="/">BudgApp</a>
            {% endif %}
        </div>
       
    </div>
    <div class="icons">
        <div class="icons-container">
        <a href="/add-budget" class="btn btn-primary"><img src="https://cdn-icons-png.flaticon.com/512/2649/2649615.png" alt="budget icon" id="budget"></a>
        <a href="/add-income" class="btn btn-primary"> <img src="https://png.pngtree.com/png-vector/20190910/ourmid/pngtree-money-icon-png-image_1728906.jpg" alt="income icon" id="income"> </a>
        <a href="/add-expense" class="btn btn-primary"><img src="https://static.thenounproject.com/png/97461-200.png" alt="expense icon" id="expense"> </a>
        </div>
        
    </div>
    <div class="content">
        <div class="content-container">
            <div class="content-budgets">
                <h2>Budgets</h2>
               
                {% for budget in budgets reversed %}
                <div class="data">
                    <a href="view-budget/{{budget.id}}">{{budget.name}}: &#8358;{{budget.amount}}</a> 
                    <div class="data-functions">
                        <a class="ba-button" href="edit-budget/{{budget.id}}">Edit</a> <a class="delete-icon" href="delete-budget/{{budget.id}}">&times;</a> 
                    </div>
                </div>
                 {% endfor %}
                
               
           </div>
            <div class="content-incomes">
                <h2>Incomes</h2>
                <div class="form-floating">
                    <form action="sort-by-income/" method="post" id="select-form">
                        {% csrf_token %}
                    <select class="form-select" id="floating-income-select" name="income-select" onchange="submitForm();" aria-label="Floating label select example">
                      {% for income in incomes %}
                        <option value="{{income.id}}" id="select-option">{{income}}</option>
                      {% endfor %}
                    </select>
                    <label for="floatingSelect">Select Income</label>

                    <input type="submit" value="Show">
                </form>
                  </div>
                {% for income in incomes %} 

                
                <div class="data">
                    <a href="#"> {{income}}: &#8358;{{income.amount}} </a>
                    <div class="data-functions">
                        <a class="ba-button" href="edit-income/{{income.id}}">Edit</a> <a href="addto-income/{{income.id}}" class="ba-button">Add To Income</a>  <!--<a class="delete-icon" href="delete-income/{{income.id}}">&times;</a>  -->
                    </div>
                </div>
                   
                {% endfor %}
            </div>
            <div class="content-expenses">
                <a href="expenses"><h2>Expenses</h2></a>
                
                
                {% for expense in expenses reversed %}
                <div class="data">
                    <a href="expense/{{expense.id}}"><span>&rarr; </span>{{expense.name}}</a>
                    <div class="data-functions"> 
                        <small>&#8358;{{expense.amount}}</small>                       
                        <a class="ba-button" href="edit-expense/{{expense.id}}">edit</a>
                        <a class="" href="delete-expense/{{expense.id}}">&times;</a>
                    </div>
                </div>
                  
                {% endfor %}
            </div>
        </div>
    </div>
    <script>
        const select = document.getElementById('floating-income-select')
        const formTosubmit = document.getElementById('select-form')
        const selectOption = document.getElementById('select-option')
    
        function submitForm(){
            formTosubmit.submit();
            console.log("Dashboard Form submitted");
        }
    </script>
    <div id="for-global-test">
        FOR GLOBAL TEST
    </div>

    <div class="content">
        <div class="content-container">
            <div class="content-budgets">
                <h2>Budgets</h2>
               
                {% for budget in budgets %}
                <div class="data">
                    <a href="budget/{{budget.id}}">{{budget.name}}: &#8358;{{budget.amount}}</a> 
                    <div class="data-functions">
                        <a class="ba-button" href="edit-budget/{{budget.id}}">Edit</a> <a class="delete-icon" href="delete-budget/{{budget.id}}">&times;</a> 
                    </div>
                </div>
                 {% endfor %}
                
               
           </div>
            <div class="content-incomes">
                <h2>Incomes</h2>

                {% for income in incomes %} 
                <div class="data">
                    <a href="#"> {{income}}: &#8358;{{income.amount}} </a>
                    <div class="data-functions">
                        <a class="ba-button" href="edit-income/{{income.id}}">Edit</a> <a href="addto-income/{{income.id}}" class="ba-button">Add To Income</a>  <!--<a class="delete-icon" href="delete-income/{{income.id}}">&times;</a>  -->
                    </div>
                </div>
                   
                {% endfor %}
            </div>
            <div class="content-expenses">
                <a href="expenses"><h2>Expenses</h2></a>
                
                
                {% for expense in expenses reversed %}
                <div class="data">
                    <a href="expense/{{expense.id}}"><span>&rarr; </span>{{expense.name}}</a>
                    <div class="data-functions">                        
                        <a class="ba-button" href="edit-expense/{{expense.id}}">edit</a>
                        <a class="" href="delete-expense/{{expense.id}}">&times;</a>
                    </div>
                </div>
                  
                {% endfor %}
            </div>
        </div>
    </div>
</div>


    {% if user.appuser %}
        {% if user.appuser.profile_picture %}
            <p>Profile picture for {{user.username}} is:</p>
            <img src="{{user.appuser.profile_picture.url}}" style="width:100px;height:100px;border-radius:50%;" alt="">
            <h2 class="display-4">{{user.appuser.profile_picture.url}}</h2>
        {% else %}
            <img src="#" alt="profile_picture">
        {% endif %}
    {% else %}
        <p>{{user.username}} has no profile picture</p>
    {% endif %}
    
